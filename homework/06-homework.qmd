---
title: "Homework 06"
author: "Alec L. Robitaille"
date: "2023-04-26"
---

```{r, include = FALSE}
source('R/packages.R')
```

```{r, eval = FALSE}
source('R/packages.R')
```


## Data 
```{r}
# Data
source('R/data_reedfrogs.R')

# from ?reedfrogs
# density: initial tadpole density (number of tadpoles in a 1.2 x 0.8 x 0.4 m tank) [experiment 1]
# pred: factor -  predators present or absent [experiment 1]
# size: factor - big or small tadpoles [experiment 1]
# surv: number surviving
# propsurv: proportion surviving (=surv/density) [experiment 1]

DT_frogs <- data_reedfrogs()
```


## Question 1
> Conduct a prior predictive simulation for the Reedfrog model. By this I mean
to simulate the prior distribution of tank survival probabilities αj. Start by
using this prior: 

> $\alpha_{j} \sim Normal(\bar{\alpha}, \sigma)$

> $\bar{\alpha} \sim Normal(0, 1)$

> $\sigma \sim Exponential(1)$ 

> Be sure to transform the $\alpha_{j}$ values to the probability scale for
plotting and summary. How does increasing the width of the prior on $\sigma$ change the
prior distribution of $\alpha_{j}$? You might try Exponential(10) and
Exponential(0.1) for example.



```{r}
get_prior(
	surv | trials(density) ~ (1 | tank),
	data = DT_frogs,
	family = 'binomial'
)
```

- $\bar{\alpha}$ corresponds to class Intercept
- $\sigma$ corresponds to class sd


From: Bürkner, P.-C. (2017). brms: An R Package for Bayesian Multilevel Models Using Stan. Journal of Statistical Software, 80(1), 1–28. https://doi.org/10.18637/jss.v080.i01

> `fit1 <- brm(formula = time | cens(censored) ~ age * sex + disease + (1 +
age|patient), data = kidney, family = lognormal(), prior =
c(set_prior("normal(0,5)", class = "b"), set_prior("cauchy(0,2)", class = "sd"),
set_prior("lkj(2)", class = "cor")))`
  
> Each group-level effect of each grouping factor has a standard deviation
parameter, which is restricted to be non-negative ... In brms, standard
deviation parameters are named as sd_<group>_<coef> so that sd_patient_Intercept
and sd_patient_age are the parameter names in the example [(1 + age|patient)].

